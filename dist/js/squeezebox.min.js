
;(function(window,document,undefined){"use strict";function getStyle(el,prop){return window.getComputedStyle(el).getPropertyValue(prop);}
function setAttrs(el,attrs){for(var key in attrs){el.setAttribute(key,attrs[key]);}}
function siblings(el,cls){return Array.prototype.filter.call(el.parentNode.children,function(child){return child!==el&&child.classList.contains(cls);});}
var _Squeezebox=function(opts){this.wrapperEl='.squeezebox';this.headersClass='squeezhead';this.foldersClass='squeezecnt';this.closeOthers=true;this.speed='.7s';if(opts){for(var opt in opts){this[opt]=opts[opt];}}};_Squeezebox.prototype={init:function(){var self=this;this.wrapper=document.querySelectorAll(this.wrapperEl);Array.prototype.forEach.call(this.wrapper,function(wr,idx,node){self.getHeights(wr);self.setListeners(wr);});},getHeights:function(wr){var self=this,folders=wr.getElementsByClassName(self.foldersClass),fl=folders.length,el,elst;while(fl--){el=folders[fl],elst=el.style;elst.position='absolute';elst.visibility='hidden';elst.display='';elst.transition='';self.showEl(el);setAttrs(el,{'data-sq_h':getStyle(el,'height'),'data-sq_pt':getStyle(el,'padding-top'),'data-sq_pb':getStyle(el,'padding-bottom')});elst.position='relative';elst.visibility='visible';self.hideEl(el);self.addTran(el);}},addTran:function(el){var self=this;setTimeout(function(){el.style.transition='all '+self.speed;},100);},hideEl:function(el){var elst=el.style;elst.maxHeight=0;elst.paddingTop=0;elst.paddingBottom=0;el.setAttribute('aria-hidden','true');},showEl:function(el){var elst=el.style;elst.maxHeight=el.getAttribute('data-sq_h');elst.paddingTop=el.getAttribute('data-sq_pt');elst.paddingBottom=el.getAttribute('data-sq_pb');el.setAttribute('aria-hidden','false');},hideSibl:function(el){var self=this;Array.prototype.forEach.call(siblings(el,self.foldersClass),function(sib,idx,ndl){self.hideEl(sib);});},setListeners:function(wr){var self=this;wr.addEventListener('click',function(e){var el=e.target;while(el&&!el.classList.contains(self.headersClass)){el=el.parentNode;if(el===wr){return;}}
self.clickedEl=el;self.toggle(el.nextElementSibling);});},toggle:function(el){if(el.getAttribute('aria-hidden')==='false'){this.hideEl(el);this.fireCallback(el,'onClose');}else{if(this.closeOthers){this.hideSibl(el);}
this.showEl(el);this.fireCallback(el,'onOpen');}},fireCallback:function(el,dir){(this[dir])?this[dir](this.wrapper,this.clickedEl,el):null;}};window.Squeezebox=_Squeezebox;})(window,document);